import{f as g,g as P,r as S,p as f,w as v,a as w,c as m,b as s,h as i,k as d,j as y,s as n,d as h,F as x,n as V,t as r,i as p,o as C}from"./index-CSRMXkXm.js";const L=g("estimate",{state:()=>({error:null,loading:!1,slabCount:0,totalCm:0,wagePerCm:80,selectedStone:"",unitStonePrice:0,pricePerCm:0,stoneList:[],calcSteps:""}),actions:{selectStone(o){const t=this.stoneList.find(a=>a.name===o);t&&(this.selectedStone=t.name,this.unitStonePrice=t.price)},calculatePricePerCm(){if(this.totalCm>0){const o=this.slabCount*this.unitStonePrice/this.totalCm;this.pricePerCm=this.wagePerCm+o,this.calcSteps=`公式：(${this.slabCount} × ${this.unitStonePrice}) ÷ ${this.totalCm} + ${this.wagePerCm}
= ${o.toFixed(2)} + ${this.wagePerCm} = ${this.pricePerCm.toFixed(2)} 元/cm`}else this.pricePerCm=0,this.calcSteps="請輸入有效的總公分數。"},async fetchData(){this.loading=!0,this.error=null;try{const o=await P.get("https://script.google.com/macros/s/AKfycbweY4uKhj-NmmqmaKMD401ePMjVrGEE7_fuYNSmEYAOk4I4pW2garBtDCtYehV-I0oX/exec");this.stoneList=o.data.filter(t=>t.name!=="")}catch(o){this.error="資料抓取失敗，請稍後再試",console.error(o)}finally{this.loading=!1}}},getters:{totalEstimate(o){return o.totalCm*o.pricePerCm}}}),k={class:"p-4 space-y-2"},E=["value"],F={key:0,disabled:""},$={class:"mt-3 space-y-1"},D={class:"bg-gray-100 p-2 rounded text-sm whitespace-pre-wrap"},N={__name:"FuturePrice",setup(o){const t=L(),a=S("期貨");f(()=>{t.fetchData()}),v(()=>[t.slabCount,t.unitStonePrice,t.wagePerCm,t.totalCm],()=>{t.calculatePricePerCm()});const c=w(()=>t.stoneList.filter(u=>u.name.toLowerCase().includes(a.value.toLowerCase())));function b(u){t.selectStone(u.target.value)}return(u,e)=>(C(),m("div",k,[e[14]||(e[14]=s("h2",{class:"text-lg font-bold"},"每公分報價計算",-1)),s("div",null,[i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l),placeholder:"搜尋石材",class:"border mb-2"},null,512),[[d,a.value]]),e[6]||(e[6]=s("label",null,"選擇石材：",-1)),i(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>n(t).selectedStone=l),onChange:b,class:"border"},[e[5]||(e[5]=s("option",{disabled:"",value:""},"請選擇",-1)),(C(!0),m(x,null,V(c.value,l=>(C(),m("option",{key:l.name,value:l.name},r(l.name)+"（"+r(l.price)+" 元/片） ",9,E))),128)),c.value.length===0?(C(),m("option",F," 查無符合石材 ")):h("",!0)],544),[[y,n(t).selectedStone]])]),s("div",null,[e[7]||(e[7]=s("label",null,"大板數量：",-1)),i(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>n(t).slabCount=l),type:"number",class:"border"},null,512),[[d,n(t).slabCount,void 0,{number:!0}]])]),s("div",null,[e[8]||(e[8]=s("label",null,"總公分數：",-1)),i(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>n(t).totalCm=l),type:"number",class:"border"},null,512),[[d,n(t).totalCm,void 0,{number:!0}]])]),s("div",null,[e[9]||(e[9]=s("label",null,"每公分加工工資：",-1)),i(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>n(t).wagePerCm=l),type:"number",class:"border"},null,512),[[d,n(t).wagePerCm,void 0,{number:!0}]])]),s("div",$,[s("p",null,"石材單價："+r(n(t).unitStonePrice)+" 元/片",1),s("p",null,[e[10]||(e[10]=p(" 每公分報價： ")),s("strong",null,r(n(t).pricePerCm.toFixed(2)),1),e[11]||(e[11]=p(" 元/cm "))])]),s("p",null,[e[12]||(e[12]=p(" 總估價金額：")),s("strong",null,r(n(t).totalEstimate.toFixed(0)),1),e[13]||(e[13]=p(" 元 "))]),s("pre",D,r(n(t).calcSteps)+`
  `,1)]))}};export{N as default};
