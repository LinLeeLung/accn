import{f as P,g,r as S,p as v,w as f,a as w,c as d,b as l,h as r,k as u,j as y,s as o,d as x,F as V,n as h,t as i,i as p,o as C}from"./index-D0qQG61i.js";const L=P("estimate",{state:()=>({error:null,loading:!1,slabCount:0,totalCm:0,wagePerCm:80,selectedStone:"",unitStonePrice:0,pricePerCm:0,stoneList:[],calcSteps:""}),actions:{selectStone(n){const t=this.stoneList.find(a=>a.name===n);t&&(this.selectedStone=t.name,this.unitStonePrice=t.price)},calculatePricePerCm(){if(this.totalCm>0){const n=this.slabCount*this.unitStonePrice/this.totalCm;this.pricePerCm=this.wagePerCm+n,this.calcSteps=`公式：(${this.slabCount} × ${this.unitStonePrice}) ÷ ${this.totalCm} + ${this.wagePerCm}
= ${n.toFixed(2)} + ${this.wagePerCm} = ${this.pricePerCm.toFixed(2)} 元/cm`}else this.pricePerCm=0,this.calcSteps="請輸入有效的總公分數。"},async fetchData(){this.loading=!0,this.error=null;try{const n=await g.get("https://script.google.com/macros/s/AKfycbweY4uKhj-NmmqmaKMD401ePMjVrGEE7_fuYNSmEYAOk4I4pW2garBtDCtYehV-I0oX/exec");this.stoneList=n.data.filter(t=>t.name!=="")}catch(n){this.error="資料抓取失敗，請稍後再試",console.error(n)}finally{this.loading=!1}}},getters:{totalEstimate(n){return n.totalCm*n.pricePerCm}}}),k={class:"p-4 space-y-2"},E=["value"],F={key:0,disabled:""},$={class:"mt-3 space-y-1"},D={class:"bg-gray-100 p-2 rounded text-sm whitespace-pre-wrap"},M={__name:"FuturePrice",setup(n){const t=L(),a=S("期貨");v(()=>{t.fetchData()}),f(()=>[t.slabCount,t.unitStonePrice,t.wagePerCm,t.totalCm],()=>{t.calculatePricePerCm()});const b=w(()=>t.stoneList.filter(m=>m.name.toLowerCase().includes(a.value.toLowerCase())));function c(m){t.selectStone(m.target.value)}return(m,e)=>(C(),d("div",k,[e[16]||(e[16]=l("h2",{class:"text-lg font-bold"},"每公分報價計算",-1)),l("div",null,[r(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),placeholder:"搜尋石材",class:"border mb-2"},null,512),[[u,a.value]]),e[7]||(e[7]=l("label",null,"選擇石材：",-1)),r(l("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(t).selectedStone=s),onChange:c,class:"border"},[e[6]||(e[6]=l("option",{disabled:"",value:""},"請選擇",-1)),(C(!0),d(V,null,h(b.value,s=>(C(),d("option",{key:s.name,value:s.name},i(s.name)+"（"+i(s.price)+" 元/片） ",9,E))),128)),b.value.length===0?(C(),d("option",F," 查無符合石材 ")):x("",!0)],544),[[y,o(t).selectedStone]])]),l("div",null,[e[8]||(e[8]=l("label",null,"大板價格：",-1)),r(l("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(t).unitStonePrice=s),type:"number",class:"border"},null,512),[[u,o(t).unitStonePrice,void 0,{number:!0}]])]),l("div",null,[e[9]||(e[9]=l("label",null,"大板數量：",-1)),r(l("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o(t).slabCount=s),type:"number",class:"border"},null,512),[[u,o(t).slabCount,void 0,{number:!0}]])]),l("div",null,[e[10]||(e[10]=l("label",null,"總公分數：",-1)),r(l("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o(t).totalCm=s),type:"number",class:"border"},null,512),[[u,o(t).totalCm,void 0,{number:!0}]])]),l("div",null,[e[11]||(e[11]=l("label",null,"每公分加工工資：",-1)),r(l("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o(t).wagePerCm=s),type:"number",class:"border"},null,512),[[u,o(t).wagePerCm,void 0,{number:!0}]])]),l("div",$,[l("p",null,"石材單價："+i(o(t).unitStonePrice)+" 元/片",1),l("p",null,[e[12]||(e[12]=p(" 每公分報價： ")),l("strong",null,i(o(t).pricePerCm.toFixed(2)),1),e[13]||(e[13]=p(" 元/cm "))])]),l("p",null,[e[14]||(e[14]=p(" 總估價金額：")),l("strong",null,i(o(t).totalEstimate.toFixed(0)),1),e[15]||(e[15]=p(" 元 "))]),l("pre",D,i(o(t).calcSteps)+`
  `,1)]))}};export{M as default};
